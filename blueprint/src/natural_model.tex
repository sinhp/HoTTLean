In this section we describe the categorical semantics of
HoTT via Natural Models.
This will not be a detailed account of the syntax of HoTT,
but will be a detailed account of what is needed to interpret such syntax.
It will follow \cite{awodey2017naturalmodelshomotopytype},
but with a more compact description of identity types
using the technology of polynomial endofunctors,
and a universe of small types.

\medskip

\begin{notation*}
  We will have two universe sizes - one small and one large.
  We denote the category of small sets as $\set$ and the large sets as $\Set$.
  For example, we could take the small sets $\set$ to be those in $\Set$ bounded in cardinality
  by some inaccessible cardinal.
\end{notation*}

\subsection{Types}

% Assume an inaccessible cardinal $\lambda$. Write $\Set$ for the category of all sets. Say that a set $A$ is $\lambda$-small if $|A| < \lambda$.  Write $\Set_\lambda$ for the full
% subcategory of $\Set$ spanned by  $\lambda$-small sets.

Let $\catC$ be a locally small category, i.e.~a category whose class of objects is a $\Set$ and
whose hom-classes are from $\set$.
% We do not assume that $\mathbb{C}$ is $\lambda$-small for
% the moment.
We write $\pshC$ for the category of (large) presheaves over $\catC$,
\[
\pshC \defeq [\catC^\op, \Set]
\]

\medskip

% Because of the assumption of the existence of $\lambda$, $\pshC$ has additional structure. Let
% \[
% \Term \to \Type
% \]
% be the Hofmann-Streicher universe in $\pshC$ associated to $\lambda$. In particular,
% \[
% \Type(c) \defeq \{  A \co (\catC_{/c})^\op \to \Set_{\lambda} \}
% \]

\begin{defn}
  Following Awodey \cite{awodey2017naturalmodelshomotopytype},
  we say that a map $\tp : \Term \to \Type$ is presentable when
  any fiber of a representable is representable.
  In other words, given any $\Ga \in \catC$ and a map $A : \yo (\Ga) \to \Type$,
  there is some representable $\Ga \cdot A \in \catC$ and maps $\disp{A} : \Ga \cdot A \to \Ga$
  and $\var_{A} : \yo (\Ga \cdot A) \to \Term$ forming a pullback
  % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXHlvIChcXEdhIFxcY2RvdCBBKSJdLFswLDEsIlxceW8gKFxcR2EpIl0sWzEsMSwiXFxUeXBlIl0sWzEsMCwiXFxUZXJtIl0sWzAsMSwiXFx5byAoXFxkaXNwe0F9KSIsMl0sWzEsMiwiQSIsMl0sWzMsMl0sWzAsMywiXFx2YXJfQSJdXQ==
\[\begin{tikzcd}
	{\yo (\Ga \cdot A)} & \Term \\
	{\yo (\Ga)} & \Type
	\arrow["{\var_A}", from=1-1, to=1-2]
	\arrow["{\yo (\disp{A})}"', from=1-1, to=2-1]
	\arrow["\tp", from=1-2, to=2-2]
	\arrow["A"', from=2-1, to=2-2]
\end{tikzcd}\]
\end{defn}

\medskip

The Natural Model associated to a presentable map $\tp \co \Term \to \Type$ consists of
\begin{itemize}
\item contexts as objects $\Gamma, \Delta, \ldots \in \catC$,
\item a type in context $\yo (\Gamma)$ as a map $A \co \yo(\Gamma) \to \Type$,
\item a term of type $A$ in context $\Gamma$ as a map $a \co \yo(\Gamma) \to \Term$ such that
\[
\xymatrix{
 & \Term \ar[d]^{\tp} \\
\Gamma \ar[r]_-A \ar[ur]^{a} & \Type}
\]
commutes,
\item an operation called ``context extension'' which given a context $\Gamma$ and a type $A \co \yo(\Gamma) \to \Type$ produces a context $\Gamma\cdot A$ which fits into a pullback diagram below.
\[
\xymatrix{
\yo(\Gamma.A) \ar[r] \ar[d] & \Term \ar[d] \\
\yo(\Gamma) \ar[r]_-{A} & \Type}
\]
\end{itemize}

% In the internal type theory of $\pshC$, we write
% \[
%  (\Gamma) \ A \co \Type \qquad  (\Gamma) \ a \co A
% \]
% to mean that $A$ is a type in context $\Gamma$ and that $a$ is an element of type $A$ in context
% $\Gamma$, respectively.




{\bf Remark.}
Sometimes, we first construct a presheaf $X$ over $\Gamma$ and observe that it can be classified by a map into $\Type$. We write
\[
\xymatrix@C=1cm{
X \ar[r] \ar[d]& \Term \ar[d] \\
\yo(\Gamma) \ar[r]_-{\ulcorner X \urcorner} & \Type}
\]
to express this situation, i.e.~$X \cong \yo(\Gamma \cdot \ulcorner X \urcorner)$.

\medskip

\subsection{Pi types}

We will use $\Poly{\tp}$ to denote the polynomial endofunctor
(\cref{polynomial_endofunctor}) associated with our presentable map $\tp$.
Then an interpretation of $\Pi$ types consists of a pullback square
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXFBvbHl7XFx0cH17XFxUZXJtfSJdLFswLDEsIlxcUG9seXtcXHRwfXtcXFR5cGV9Il0sWzEsMCwiXFxUZXJtIl0sWzEsMSwiXFxUeXBlIl0sWzAsMSwiXFxQb2x5e1xcdHB9e1xcdHB9IiwyXSxbMCwyLCJcXGxhIl0sWzIsMywiXFx0cCJdLFsxLDMsIlxcUGkiLDJdLFswLDMsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
\begin{equation}
  \label{fig:pi_intp_pullback}
	\begin{tikzcd}
	{\Poly{\tp}{\Term}} & \Term \\
	{\Poly{\tp}{\Type}} & \Type
	\arrow["\la", from=1-1, to=1-2]
	\arrow["{\Poly{\tp}{\tp}}"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["\tp", from=1-2, to=2-2]
	\arrow["\Pi"', from=2-1, to=2-2]
\end{tikzcd}
\end{equation}

% TODO: details, interpretation of syntax

\subsection{Sigma types}

An interpretation of $\Si$ types consists of a pullback square
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJRIl0sWzAsMSwiXFxQb2x5e1xcdHB9e1xcVHlwZX0iXSxbMSwwLCJcXFRlcm0iXSxbMSwxLCJcXFR5cGUiXSxbMCwxLCJcXHRwIFxcdHJpYW5nbGVsZWZ0IFxcdHAiLDJdLFswLDIsIlxccGFpciJdLFsyLDMsIlxcdHAiXSxbMSwzLCJcXFNpIiwyXSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\begin{equation}
  \label{fig:si_intp_pullback}
	\begin{tikzcd}
	Q & \Term \\
	{\Poly{\tp}{\Type}} & \Type
	\arrow["\pair", from=1-1, to=1-2]
	\arrow["{\tp \triangleleft \tp}"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["\tp", from=1-2, to=2-2]
	\arrow["\Si"', from=2-1, to=2-2]
\end{tikzcd}
\end{equation}

	where the composition of polynomials
	$\tp \triangleleft \tp : Q \to \Poly{\tp}{\Type}$ is given by

% https://q.uiver.app/#q=WzAsMTEsWzMsMCwiXFxQb2x5e1xcdHB9IHtcXFR5cGV9Il0sWzMsMSwiXFxUeXBlIl0sWzIsMCwiUiJdLFsyLDEsIlxcVGVybSJdLFsxLDEsIlxcVGVybSBcXHRpbWVzIFxcVHlwZSJdLFsxLDIsIlxcVHlwZSJdLFsyLDIsIlxcdGVybWluYWwiXSxbMCwxLCJcXFRlcm0gXFx0aW1lcyBcXFRlcm0iXSxbMCwyLCJcXFRlcm0iXSxbMSwwLCJSIl0sWzAsMCwiUSJdLFswLDEsIlxcdHBfKiBcXFRlcm1eKiBcXFR5cGUiXSxbMiwwXSxbMiwzXSxbMywxLCJcXHRwIiwyXSxbMiwxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNCwzXSxbNCw1XSxbNSw2XSxbMyw2XSxbNCw2LCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNyw0XSxbNyw4XSxbOCw1LCJcXHRwIiwyXSxbNyw1LCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbMTAsN10sWzEwLDQsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs5LDIsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEwLDldLFs5LDQsIlxcY291bml0IiwxXSxbMTAsMCwiXFx0cCBcXHRyaWFuZ2xlbGVmdCBcXHRwIiwxLHsiY3VydmUiOi0zfV1d
\[\begin{tikzcd}
	Q & R & R & {\Poly{\tp} {\Type}} \\
	{\Term \times \Term} & {\Type \times \Term} & \Term & \Type \\
	\Term & \Type & \terminal
	\arrow[from=1-1, to=1-2]
	\arrow["{\tp \triangleleft \tp}"{description}, bend left, from=1-1, to=1-4]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow[Rightarrow, no head, from=1-2, to=1-3]
	\arrow["\counit"{description}, from=1-2, to=2-2]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-3, to=2-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-3, to=2-4]
	\arrow["{\tp_* \Term^* \Type}", from=1-4, to=2-4]
	\arrow[from=2-1, to=2-2]
	\arrow[from=2-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow["\tp"', from=2-3, to=2-4]
	\arrow[from=2-3, to=3-3]
	\arrow["\tp"', from=3-1, to=3-2]
	\arrow[from=3-2, to=3-3]
\end{tikzcd}\]
  Here, $\counit : \tp^{*} \tp_{*} \Term^{*} \Type \to \Term^{*} \Type$
  is the counit of the adjunction $\tp^{*} \dashv \tp_{*}$ at $\Term^{*} \Type \in \Pshgrpd / \Term$.
% TODO: details, interpretation of syntax

\subsection{Identity types}

To interpret the formation and introduction rules for identity types
we require a commutative square (this need not be pullback)
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXFRlcm0iXSxbMCwxLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMSwxLCJcXFR5cGUiXSxbMSwwLCJcXFRlcm0iXSxbMCwxLCJcXGRlIiwyXSxbMSwyLCJcXElkIiwyXSxbMywyLCJcXHRwIl0sWzAsMywiXFxyZWZsIl1d
\begin{equation}
  \label{figure:id_pullback_def}
\begin{tikzcd}
	\Term & \Term \\
	{\tp \times_\Type \tp} & \Type
	\arrow["\refl", from=1-1, to=1-2]
	\arrow["\de"', from=1-1, to=2-1]
	\arrow["\tp", from=1-2, to=2-2]
	\arrow["\Id"', from=2-1, to=2-2]
\end{tikzcd}
\end{equation}

where $\de$ is the diagonal:
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXFRlcm0iXSxbMSwxLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMiwxLCJcXFRlcm0iXSxbMiwyLCJcXFR5cGUiXSxbMSwyLCJcXFRlcm0iXSxbMCwxLCJcXGRlIiwyXSxbMCwyXSxbMSwyXSxbMiwzLCJcXHRwIl0sWzQsMywiXFx0cCIsMl0sWzEsNF0sWzEsMywiIiwyLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzAsNCwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	\Term \\
	& {\tp \times_\Type \tp} & \Term \\
	& \Term & \Type
	\arrow["\de"', from=1-1, to=2-2]
	\arrow[Rightarrow, no head, bend left, from=1-1, to=2-3]
	\arrow[Rightarrow, no head, bend right, from=1-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow["\tp", from=2-3, to=3-3]
	\arrow["\tp"', from=3-2, to=3-3]
\end{tikzcd}\]

Then let $I$ be the pullback.
We get a comparison map $\rho$
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXFRlcm0iXSxbMSwyLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMiwyLCJcXFR5cGUiXSxbMiwxLCJcXFRlcm0iXSxbMSwxLCJJIl0sWzAsMSwiXFxkZSIsMix7ImN1cnZlIjoyfV0sWzEsMiwiXFxJZCIsMl0sWzMsMiwiXFx0cCJdLFswLDMsIlxccmVmbCIsMCx7ImN1cnZlIjotM31dLFs0LDFdLFs0LDNdLFs0LDIsIiIsMix7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFswLDQsIlxccmhvIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
\[\begin{tikzcd}
	\Term \\
	& I & \Term \\
	& {\tp \times_\Type \tp} & \Type
	\arrow["\rho"{description}, dashed, from=1-1, to=2-2]
	\arrow["\refl", bend left, from=1-1, to=2-3]
	\arrow["\de", bend right, from=1-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow["\tp", from=2-3, to=3-3]
	\arrow["\Id"', from=3-2, to=3-3]
\end{tikzcd}\]

Then view $\rho : \tp \to q$ as a map in the slice over $\Type$.
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXFRlcm0iXSxbMSwyLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMSwxLCJJIl0sWzEsMywiXFxUZXJtIl0sWzEsNCwiXFxUeXBlIl0sWzAsMSwiXFxkZSIsMSx7ImN1cnZlIjoxfV0sWzIsMV0sWzAsMiwiXFxyaG8iLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwzLCJcXGZzdCIsMl0sWzMsNF0sWzAsNCwiXFx0cCIsMix7ImN1cnZlIjozfV0sWzAsMywiIiwyLHsiY3VydmUiOjIsImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsNCwicSIsMCx7ImN1cnZlIjotNX1dXQ==
\[\begin{tikzcd}
	\Term \\
	& I \\
	& {\tp \times_\Type \tp} \\
	& \Term \\
	& \Type
	\arrow["\rho"{description}, dashed, from=1-1, to=2-2]
	\arrow["\de"{description}, bend right = 10, from=1-1, to=3-2]
	\arrow[bend right = 25, Rightarrow, no head, from=1-1, to=4-2]
	\arrow["\tp"', bend right = 40, from=1-1, to=5-2]
	\arrow[from=2-2, to=3-2]
	\arrow["q", bend left = 50, from=2-2, to=5-2]
	\arrow["\fst"', from=3-2, to=4-2]
	\arrow[from=4-2, to=5-2]
\end{tikzcd}\]

Now (by \cref{polynomial_on_slice_map})
applying $\Poly{-} : (\pshC / \Type) ^{\op} \to [\pshC, \pshC]$ to $\rho : \tp \to q$
gives us a naturality square (this also need not be pullback).
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXFBvbHl7cX0ge1xcVGVybX0iXSxbMCwxLCJcXFBvbHl7cX0ge1xcVHlwZX0iXSxbMSwxLCJcXFBvbHl7XFx0cH0ge1xcVGVybX0iXSxbMSwwLCJcXFBvbHl7XFx0cH0ge1xcVGVybX0iXSxbMCwxLCJcXFBvbHl7cX0ge1xcdHB9IiwyXSxbMSwyLCJcXFN0YXJ7XFxyaG99X3tcXFR5cGV9IiwyXSxbMywyLCJcXFBvbHl7XFx0cH0ge1xcdHB9Il0sWzAsMywiXFxTdGFye1xccmhvfV97XFxUZXJtfSJdXQ==
\begin{equation}
  \label{J_definition_diagram}
\begin{tikzcd}
	{\Poly{q} {\Term}} & {\Poly{\tp} {\Term}} \\
	{\Poly{q} {\Type}} & {\Poly{\tp} {\Term}}
	\arrow["{\Star{\rho}_{\Term}}", from=1-1, to=1-2]
	\arrow["{\Poly{q} {\tp}}"', from=1-1, to=2-1]
	\arrow["{\Poly{\tp} {\tp}}", from=1-2, to=2-2]
	\arrow["{\Star{\rho}_{\Type}}"', from=2-1, to=2-2]
\end{tikzcd}
\end{equation}
Taking the pullback $T$ and the comparison map $\ep$ we have
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXFBvbHl7cX0ge1xcVGVybX0iXSxbMSwyLCJcXFBvbHl7cX0ge1xcVHlwZX0iXSxbMiwyLCJcXFBvbHl7XFx0cH0ge1xcVHlwZX0iXSxbMiwxLCJcXFBvbHl7XFx0cH0ge1xcVGVybX0iXSxbMSwxLCJUIl0sWzAsMSwiXFxQb2x5e3F9IHtcXHRwfSIsMix7ImN1cnZlIjoyfV0sWzEsMiwiXFxTdGFye1xccmhvfV97XFxUeXBlfSIsMl0sWzMsMiwiXFxQb2x5e1xcdHB9IHtcXHRwfSJdLFswLDMsIlxcU3RhcntcXHJob31fe1xcVGVybX0iLDAseyJjdXJ2ZSI6LTN9XSxbNCwxXSxbNCwzXSxbNCwyLCIiLDIseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbMCw0LCJcXGVwIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
\begin{equation}
	\label{diag:J_definition}
\begin{tikzcd}
	{\Poly{q} {\Term}} \\
	& T & {\Poly{\tp} {\Term}} \\
	& {\Poly{q} {\Type}} & {\Poly{\tp} {\Type}}
	\arrow["\ep"{description}, dashed, from=1-1, to=2-2]
	\arrow["{\Star{\rho}_{\Term}}", bend left, from=1-1, to=2-3]
	\arrow["{\Poly{q} {\tp}}"', bend right, from=1-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow["{\Poly{\tp} {\tp}}", from=2-3, to=3-3]
	\arrow["{\Star{\rho}_{\Type}}"', from=3-2, to=3-3]
\end{tikzcd}
\end{equation}
Finally, we require a section $\J : T \to \Poly{q}{\Term}$ of $\ep$,
to interpret the identity elimination rule.

\subsection{A type of small types}

We now wish to formulate a condition that allows us to have a type of small types, written $\U$, not just {\em judgement} expressing that something is a type. With this notation, the judgements that we would like to derive is
\[
 \U \co \Type \qquad
 \begin{prooftree}
 a \co \U
 \justifies
 \El(a) \co \Type
 \end{prooftree}
\]

% (For example, a sufficient and natural condition for this seems to be
% that we now have two inaccessible cardinals $\kappa$, with $\kappa < \lambda$.
% Then $\kappa$ would be the size of $\U = \Set_{< \kappa}$
% and $\lambda$ would be the size of $\set = \Set_{< \lambda}$.)

In the Natural Model, a universe $\U$ is postulated by a map
\[
\pi \co \E \to \U
\]

In the Natural Model:
\begin{itemize}
\item There is a pullback diagram of the form
\begin{equation}
\xymatrix{
\U \ar[r] \ar[d] & \Term \ar[d] \\
1 \ar[r]_-{\ulcorner \U \urcorner } & \Type }
\end{equation}
\item There is an inclusion of $\U$ into $\Type$
\[
\El \co \U \rightarrowtail \Type
\]
\item $\pi : \E \to \U$ is obtained as pullback of $\tp$; There is a pullback diagram
\begin{equation}\label{diag:universe-pullback}
\xymatrix{
E \ar@{>->}[r] \ar[d] & \Term \ar[d] \\
\U \ar@{>->}[r]_-{\El} & \Type }
\end{equation}
 \end{itemize}

With the notation above, we get
\[
\xymatrix{
\yo (\Gamma.\El(a)) \ar[r] \ar[d] & \E \ar[r] \ar[d] & \Term \ar[d] \\
\yo (\Gamma) \ar[r]_a  \ar@/_2pc/[rr]_-{A} & \U \ar[r]_{\El} & \Type}
\]
Both squares above are pullback squares.

\subsection{Stablity of the universe under type formers}

Take the pullback diagram \cref{diag:universe-pullback}.
That is a morphism in the category of polynomials.
By \cref{polynomial_on_cartesian_square} we have a cartesian natural transformation $P_\pi \to P_{\tp}$
induced by the pullback \cref{diag:universe-pullback}.
This cartesian natural transformation induces the cube diagram below;
all of the squares in the cube are pullback squares.

\begin{equation} \label{diag:universe-dependent-type-classifier-pullback-cube}
\begin{tikzcd}[row sep=scriptsize, column sep=scriptsize]
& P_\pi E \arrow[dd] \arrow[rr] \arrow[ld] & & P_\tp E \arrow[dl]  \arrow[dd]  \\
P_\pi \Term \arrow[rr, crossing over] \arrow[dd] && P_\tp \Term \arrow[dd, crossing over] \\
& P_\pi \U \arrow[rr] \arrow[ld] &&  P_\tp U \arrow[dl] \\
P_\pi \Type \arrow[rr] && P_\tp \Type \\
\end{tikzcd}
\end{equation}
We will use the compositions $\Poly{\pi}{U} \to \Poly{\tp}{\Type}$ and
$\Poly{\pi}{E} \to \Poly{\tp}{\Term}$ below.

\medskip

\begin{defn}
  We will say that universe $\U$ is closed under formation of $\Pi$-types when we have some map
	$\Pi_{U} : \Poly{\pi}{\U} \to \U$ making the following square commute
\begin{equation}\label{diag:universe-pullback-3}
\xymatrix{
\Poly{\pi}{\U} \ar@{->}[r] \ar@{-->}[d]_{\Pi_\U} & \Poly{\tp}{\Type} \ar[d]^{\Pi} \\
\U \ar@{->}[r]_-{\El} & \Type }
\end{equation}
	Note that this is merely propositional when $\El$ is a monomorphism.
\end{defn}

\medskip

From the universal property of pullbacks we can define $\la_{U} \Poly{\pi}{\E} \to \E$.
% https://q.uiver.app/#q=WzAsOCxbMCwzLCJQX1xcdHAgXFxUeXBlIl0sWzIsMywiXFxUeXBlIl0sWzMsMiwiVSJdLFszLDAsIkUiXSxbMiwxLCJcXFRlcm0iXSxbMCwxLCJQX1xcdHAgXFxUZXJtIl0sWzEsMiwiUF9cXHBpIFUiXSxbMSwwLCJQX1xcdHAgRSJdLFswLDEsIlxcUGkiLDJdLFsyLDEsIlxcRWwiLDFdLFszLDJdLFszLDRdLFs0LDEsIiIsMSx7ImxhYmVsX3Bvc2l0aW9uIjozMH1dLFs1LDBdLFs3LDMsIlxcbGFfVSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo3MCwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzcsNV0sWzcsNl0sWzYsMF0sWzUsNCwiXFxsYSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo3MH1dLFs2LDIsIlxcUGlfVSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo3MH1dXQ==
\[\begin{tikzcd}
	& {P_\tp E} && E \\
	{P_\tp \Term} && \Term \\
	& {P_\pi U} && U \\
	{P_\tp \Type} && \Type
	\arrow["{\la_U}"{description, pos=0.7}, dashed, from=1-2, to=1-4]
	\arrow[from=1-2, to=2-1]
	\arrow[from=1-2, to=3-2]
	\arrow[from=1-4, to=2-3]
	\arrow[from=1-4, to=3-4]
	\arrow["\la"{description, pos=0.7}, from=2-1, to=2-3]
	\arrow[from=2-1, to=4-1]
	\arrow["{\Pi_U}"{description, pos=0.7}, from=3-2, to=3-4]
	\arrow[from=2-3, to=4-3, crossing over]
	\arrow[from=3-2, to=4-1]
	\arrow["\El"{description}, from=3-4, to=4-3]
	\arrow["\Pi"', from=4-1, to=4-3]
\end{tikzcd}\]
The top and bottom squares in the cube above are not pullbacks,
but we know three of the vertical faces are pullback squares.
By the pullback pasting lemma it follows that the back square
involving $\Pi_ U$ and $\lambda_U$ is also a pullback square.
This concludes the construction of the $\Pi$ type former for the universe $\U$.
The only data we needed to supply was the lift $\Pi_U$
of $\Pi \colon P_\tp \Type \to \Type$ to the universe $\U$.

\medskip

\begin{defn}
  We will say that universe $\U$ is closed under formation of $\Si$-types when we have some map
	$\Si_{U} : \Poly{\pi}{\U} \to \U$ making the following square commute
\begin{equation}
\xymatrix{
\Poly{\pi}{\U} \ar@{->}[r] \ar@{-->}[d]_{\Si_\U} & \Poly{\tp}{\Type} \ar[d]^{\Si} \\
\U \ar@{->}[r]_-{\El} & \Type }
\end{equation}

	Again, this is merely propositional when $\El$ is a monomorphism.
\end{defn}

Now consider the polynomial composition $\pi \triangleleft \pi$.
% https://q.uiver.app/#q=WzAsMjAsWzQsMywiXFxQb2x5e1xcdHB9IHtcXFR5cGV9Il0sWzQsNCwiXFxUeXBlIl0sWzMsMywiUiJdLFszLDQsIlxcVGVybSJdLFsyLDQsIlxcVGVybSBcXHRpbWVzIFxcVHlwZSJdLFsyLDUsIlxcVHlwZSJdLFsxLDQsIlxcVGVybSBcXHRpbWVzIFxcVGVybSJdLFsxLDUsIlxcVGVybSJdLFsyLDMsIlIiXSxbMSwzLCJRIl0sWzMsMSwiVSJdLFsyLDEsIkUiXSxbMSwxLCJFIFxcdGltZXMgVSJdLFswLDEsIkUgXFx0aW1lcyBFIl0sWzAsMiwiRSJdLFsxLDIsIlUiXSxbMSwwLCJSX1UiXSxbMCwwLCJRX1UiXSxbMiwwLCJSX1UiXSxbMywwLCJcXFBvbHl7XFxwaX17VX0iXSxbMCwxLCJcXHRwXyogXFxUZXJtXiogXFxUeXBlIl0sWzIsMF0sWzIsM10sWzMsMSwiXFx0cCIsMV0sWzIsMSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzQsM10sWzQsNV0sWzYsNF0sWzYsN10sWzcsNSwiXFx0cCIsMl0sWzYsNSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzksNl0sWzksNCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzgsMiwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbOSw4XSxbOCw0LCJcXGNvdW5pdCIsMV0sWzEwLDFdLFsxMSwzXSxbMTEsMTAsIlxccGkiLDFdLFsxMiw0XSxbMTIsMTFdLFsxMyw2XSxbMTQsMTVdLFsxMywxNF0sWzEyLDE1XSxbMTMsMTJdLFsxMywxNSwiIiwwLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzE2LDEyLCJcXGNvdW5pdCIsMV0sWzE3LDEzXSxbMTcsMTZdLFsxNywxMiwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzE2LDE4LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxOCwxOV0sWzE5LDEwXSxbMTgsMTFdLFsxOCwxMCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzE1LDVdLFsxNCw3XSxbMTcsOV0sWzE2LDhdLFsxOCwyXSxbMTksMF0sWzE3LDE5LCJcXHBpIFxcdHJpYW5nbGVsZWZ0IFxccGkiLDEseyJjdXJ2ZSI6LTR9XV0=
\[\begin{tikzcd}
	{Q_U} & {R_U} & {R_U} & {\Poly{\pi}{U}} \\
	{E \times E} & {E \times U} & E & U \\
	E & U \\
	& Q & R & R & {\Poly{\tp} {\Type}} \\
	& {\Term \times \Term} & {\Term \times \Type} & \Term & \Type \\
	& \Term & \Type
	\arrow[from=1-1, to=1-2]
	\arrow["{\pi \triangleleft \pi}"{description}, bend left, from=1-1, to=1-4]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow[Rightarrow, no head, from=1-2, to=1-3]
	\arrow[from=1-2, to=2-2]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-3, to=2-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-3, to=2-4]
	\arrow[from=1-4, to=2-4]
	\arrow[from=1-4, to=4-5]
	\arrow[from=2-1, to=2-2]
	\arrow[from=2-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-2, to=3-2]
	\arrow[from=2-2, to=5-3, dashed]
	\arrow["\pi"{description}, from=2-3, to=2-4]
	\arrow[from=2-3, to=5-4]
	\arrow[from=2-4, to=5-5]
	\arrow[from=3-1, to=3-2]
	\arrow[from=3-1, to=6-2]
	\arrow[from=3-2, to=6-3]
	\arrow[from=4-2, to=5-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=4-2, to=5-3]
	\arrow[from=4-3, to=5-3]
	\arrow[from=4-4, to=5-4]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=4-4, to=5-5]
	\arrow["{\tp_* \Term^* \Type}", from=4-5, to=5-5]
	\arrow[from=5-2, to=6-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=5-2, to=6-3]
	\arrow[from=5-3, to=5-4]
	\arrow[from=5-3, to=6-3]
	\arrow["\tp"{description}, from=5-4, to=5-5]
	\arrow["\tp"', from=6-2, to=6-3]
	\arrow[from=1-1, dashed, to=4-2, crossing over]
	\arrow[from=1-2, dashed, to=4-3, crossing over]
	\arrow[from=1-3, to=4-4, dashed, crossing over]
	\arrow[from=2-1, dashed, to=5-2, crossing over]
	\arrow[from=4-2, to=4-3, crossing over]
	\arrow[Rightarrow, no head, from=4-3, to=4-4, crossing over]
	\arrow[from=4-4, to=4-5, crossing over]
	\arrow[from=5-2, to=5-3, crossing over]
\end{tikzcd}\]

Using pullback pasting, we see that the horizontal faces of the left cuboid
and the right cube are all pullbacks. Hence we have a pullback
% https://q.uiver.app/#q=WzAsNixbMiwxLCJcXFBvbHl7XFx0cH0ge1xcVHlwZX0iXSxbMSwxLCJSIl0sWzAsMSwiUSJdLFswLDAsIlFfVSJdLFsxLDAsIlJfVSJdLFsyLDAsIlxcUG9seXtcXHBpfXtVfSJdLFsxLDBdLFs0LDVdLFszLDJdLFs0LDFdLFs1LDBdLFszLDUsIlxccGkgXFx0cmlhbmdsZWxlZnQgXFxwaSIsMSx7ImN1cnZlIjotNH1dLFszLDRdLFsyLDFdLFsyLDAsIlxcdHAgXFx0cmlhbmdsZWxlZnQgXFx0cCIsMSx7ImN1cnZlIjozfV0sWzQsMCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzMsMSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{Q_U} & {R_U} & {\Poly{\pi}{U}} \\
	Q & R & {\Poly{\tp} {\Type}}
	\arrow[from=1-1, to=1-2]
	\arrow["{\pi \triangleleft \pi}"{description}, bend left, from=1-1, to=1-3]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow[from=1-2, to=1-3]
	\arrow[from=1-2, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-2, to=2-3]
	\arrow[from=1-3, to=2-3]
	\arrow[from=2-1, to=2-2]
	\arrow["{\tp \triangleleft \tp}"{description}, bend right, from=2-1, to=2-3]
	\arrow[from=2-2, to=2-3]
\end{tikzcd}\]

which is the left side of the following cube
% https://q.uiver.app/#q=WzAsOCxbMCwzLCJQX1xcdHAgXFxUeXBlIl0sWzIsMywiXFxUeXBlIl0sWzMsMiwiVSJdLFszLDAsIkUiXSxbMiwxLCJcXFRlcm0iXSxbMCwxLCJRIl0sWzEsMiwiUF9cXHBpIFUiXSxbMSwwLCJRX1UiXSxbMCwxLCJcXFNpIiwyXSxbMiwxLCJcXEVsIiwxXSxbMywyXSxbMyw0XSxbNCwxLCIiLDEseyJsYWJlbF9wb3NpdGlvbiI6MzB9XSxbNSwwLCJcXHRwIFxcdHJpYW5nbGVsZWZ0IFxcdHAiLDJdLFs3LDMsIlxccGFpcl9VIiwxLHsibGFiZWxfcG9zaXRpb24iOjcwLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNyw1XSxbNyw2LCJcXHBpIFxcdHJpYW5nbGVsZWZ0IFxccGkiLDIseyJsYWJlbF9wb3NpdGlvbiI6ODB9XSxbNiwwXSxbNSw0LCJcXHBhaXIiLDEseyJsYWJlbF9wb3NpdGlvbiI6ODB9XSxbNiwyLCJcXFNpX1UiLDEseyJsYWJlbF9wb3NpdGlvbiI6NzB9XV0=
\[\begin{tikzcd}
	& {Q_U} && E \\
	Q && \Term \\
	& {P_\pi U} && U \\
	{P_\tp \Type} && \Type
	\arrow["{\pair_U}"{description, pos=0.7}, dashed, from=1-2, to=1-4]
	\arrow[from=1-2, to=2-1]
	\arrow["{\pi \triangleleft \pi}"'{pos=0.8}, from=1-2, to=3-2]
	\arrow[from=1-4, to=2-3]
	\arrow[from=1-4, to=3-4]
	\arrow["\pair"{description, pos=0.8}, from=2-1, to=2-3]
	\arrow["{\tp \triangleleft \tp}"', from=2-1, to=4-1]
	\arrow[from=2-3, to=4-3]
	\arrow["{\Si_U}"{description, pos=0.7}, from=3-2, to=3-4]
	\arrow[from=3-2, to=4-1]
	\arrow["\El"{description}, from=3-4, to=4-3]
	\arrow["\Si"', from=4-1, to=4-3]
\end{tikzcd}\]
As was the case for $\Pi$, pullback pasting along the vertical faces
shows that the back face involving $\Si_ U$ and $\pair_U$ is also a pullback square.
This concludes the construction of the $\Si$ type former for the universe $\U$.
Again, the only data we needed to supply was the lift $\Si_U$
of $\Si \colon P_\tp \Type \to \Type$ to the universe $\U$.

% https://q.uiver.app/#q=WzAsOCxbMiwzLCJcXFR5cGUiXSxbMywyLCJcXFUiXSxbMywwLCJcXEUiXSxbMiwxLCJcXFRlcm0iXSxbMCwxLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMSwyLCJcXEUiXSxbMSwwLCJcXHBpIFxcdGltZXNfXFxVIFxccGkiXSxbMCwzLCJcXFRlcm0iXSxbMSwwXSxbMiwxXSxbMiwzXSxbMywwLCIiLDEseyJsYWJlbF9wb3NpdGlvbiI6MzB9XSxbNiw0LCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNiw1XSxbNCwzLCIiLDEseyJsYWJlbF9wb3NpdGlvbiI6NzB9XSxbNSwxLCIiLDEseyJsYWJlbF9wb3NpdGlvbiI6NzB9XSxbNiwyXSxbNywwXSxbNCw3XSxbNSw3XSxbNiwxLCIiLDAseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNCwwLCIiLDAseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	& {\pi \times_\U \pi} && \E \\
	{\tp \times_\Type \tp} && \Term \\
	& \E && \U \\
	\Term && \Type
	\arrow[from=1-2, to=1-4]
	\arrow[dashed, from=1-2, to=2-1]
	\arrow[from=1-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-2, to=3-4]
	\arrow[from=1-4, to=2-3]
	\arrow[from=1-4, to=3-4]
	\arrow[from=2-1, to=2-3]
	\arrow[from=2-1, to=4-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-1, to=4-3]
	\arrow[from=2-3, to=4-3]
	\arrow[from=3-2, to=3-4]
	\arrow[from=3-2, to=4-1]
	\arrow[from=3-4, to=4-3]
	\arrow[from=4-1, to=4-3]
\end{tikzcd}\]

\medskip

\begin{defn}
  We will say that universe $\U$ is closed under formation of $\Id$-types when we have some map
	$\Id_{U} : \pi \times_{\U} \pi \to \U$ making the following square commute
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXFUiXSxbMiwyLCJcXFR5cGUiXSxbMiwwLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMCwwLCJcXHBpIFxcdGltZXNfXFxVIFxccGkiXSxbMCwxLCJcXEVsIiwyXSxbMywwLCJcXElkX1UiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywyXSxbMiwxLCJcXElkIl1d
\[\begin{tikzcd}
	{\pi \times_\U \pi} && {\tp \times_\Type \tp} \\
	\\
	\U && \Type
	\arrow[from=1-1, to=1-3]
	\arrow["{\Id_U}"', dashed, from=1-1, to=3-1]
	\arrow["\Id", from=1-3, to=3-3]
	\arrow["\El"', from=3-1, to=3-3]
\end{tikzcd}\]

	Again, this is merely propositional when $\El$ is a monomorphism.
\end{defn}

From this we can obtain $\refl_{U}$ since $\E$ is a pulback.
% https://q.uiver.app/#q=WzAsOCxbMCwzLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMiwzLCJcXFR5cGUiXSxbMywyLCJVIl0sWzMsMCwiRSJdLFsyLDEsIlxcVGVybSJdLFswLDEsIlxcVGVybSJdLFsxLDIsIlxccGkgXFx0aW1lc19cXFUgXFxwaSJdLFsxLDAsIkUiXSxbMCwxLCJcXElkIiwyXSxbMiwxLCJcXEVsIiwxXSxbMywyXSxbMyw0XSxbNCwxLCIiLDEseyJsYWJlbF9wb3NpdGlvbiI6MzB9XSxbNSwwLCJcXGRlIiwyXSxbNywzLCJcXHJlZmxfVSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo3MCwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzcsNV0sWzcsNiwiXFxkZV9VIiwyLHsibGFiZWxfcG9zaXRpb24iOjMwfV0sWzYsMF0sWzUsNCwiXFxyZWZsIiwxLHsibGFiZWxfcG9zaXRpb24iOjcwfV0sWzYsMiwiXFxJZF9VIiwxLHsibGFiZWxfcG9zaXRpb24iOjcwfV1d
\[\begin{tikzcd}
	& E && E \\
	\Term && \Term \\
	& {\pi \times_\U \pi} && U \\
	{\tp \times_\Type \tp} && \Type
	\arrow["{\refl_U}"{description, pos=0.7}, dashed, from=1-2, to=1-4]
	\arrow[from=1-2, to=2-1]
	\arrow["{\de_U}"'{pos=0.3}, from=1-2, to=3-2]
	\arrow[from=1-4, to=2-3]
	\arrow[from=1-4, to=3-4]
	\arrow["\refl"{description, pos=0.7}, from=2-1, to=2-3]
	\arrow["\de"', from=2-1, to=4-1]
	\arrow[from=2-3, to=4-3]
	\arrow["{\Id_U}"{description, pos=0.7}, from=3-2, to=3-4]
	\arrow[from=3-2, to=4-1]
	\arrow["\El"{description}, from=3-4, to=4-3]
	\arrow["\Id"', from=4-1, to=4-3]
\end{tikzcd}\]
We must ensure that the left face commutes - which we can prove using the
universal property of $\tp \times_{\Type} \tp$.
It remains to construct $\J_{U}$, a section of $\ep_{U}$, given below
% https://q.uiver.app/#q=WzAsMjIsWzAsMCwiXFxFIl0sWzEsMCwiSV9VIl0sWzIsMCwiXFxFIl0sWzIsMSwiXFxVIl0sWzEsMSwiXFxwaSBcXHRpbWVzX1xcVSBcXHBpIl0sWzQsMSwiSV9VIl0sWzUsMCwiXFxFIl0sWzQsMiwiXFxwaSBcXHRpbWVzX1xcVSBcXHBpIl0sWzQsMywiXFxFIl0sWzQsNCwiXFxVIl0sWzYsMCwiXFxUZXJtIl0sWzUsMiwiXFx0cCBcXHRpbWVzX1xcVHlwZSBcXHRwIl0sWzYsMSwiXFxUeXBlIl0sWzUsMSwiSSJdLFs1LDMsIlxcVGVybSJdLFs1LDQsIlxcVHlwZSJdLFswLDMsIlxcUG9seXtxX1V9e1xcRX0iXSxbMSwzLCJUX1UiXSxbMiwzLCJcXFBvbHl7XFxwaX17XFxFfSJdLFsyLDQsIlxcUG9seXtcXHBpfXtcXFV9Il0sWzEsNCwiXFxQb2x5e3FfVX17XFxVfSJdLFs2LDJdLFswLDEsIlxccmhvX1UiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwyXSxbMSw0XSxbNCwzLCJcXElkX1UiLDJdLFs1LDZdLFs1LDddLFs3LDhdLFs4LDldLFs2LDEwXSxbNywxMV0sWzExLDEyXSxbMTAsMTJdLFsxMywxMF0sWzUsMTMsIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxMywxMV0sWzgsMTRdLFs5LDE1XSxbMTEsMTRdLFsxNCwxNV0sWzIsMywiXFxwaSJdLFswLDQsIlxcZGUiLDJdLFswLDIsIlxccmVmbF9VIiwxLHsiY3VydmUiOi0zfV0sWzE2LDE3LCJcXGVwX1UiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMTcsMThdLFsxOCwxOSwiXFxQb2x5e1xccGl9e1xccGl9Il0sWzE3LDIwXSxbMjAsMTksIihcXFN0YXJ7XFxyaG9fVX0pX1xcVSIsMl0sWzE2LDE4LCIoXFxTdGFye1xccmhvX1V9KV9cXEUiLDAseyJjdXJ2ZSI6LTN9XSxbMTYsMjAsIlxcUG9seXtxX1V9e1xcdHB9IiwyXSxbMSwzLCIiLDAseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbMTcsMTksIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs4LDE1LCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNywxNCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzUsMTEsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs1LDksInFfVSIsMSx7ImN1cnZlIjo0fV0sWzEzLDIxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\begin{equation}
  \label{diag:J_U_definition}
\begin{tikzcd}
	\E & {I_U} & \E &&& \E & \Term \\
	& {\pi \times_\U \pi} & \U && {I_U} & I & \Type \\
	&&&& {\pi \times_\U \pi} & {\tp \times_\Type \tp} & {} \\
	{\Poly{q_U}{\E}} & {T_U} & {\Poly{\pi}{\E}} && \E & \Term \\
	& {\Poly{q_U}{\U}} & {\Poly{\pi}{\U}} && \U & \Type
	\arrow["{\rho_U}"{description}, dashed, from=1-1, to=1-2]
	\arrow["{\refl_U}"{description}, bend left, from=1-1, to=1-3]
	\arrow["\de"', from=1-1, to=2-2]
	\arrow[from=1-2, to=1-3]
	\arrow[from=1-2, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-2, to=2-3]
	\arrow["\pi", from=1-3, to=2-3]
	\arrow[from=1-6, to=1-7]
	\arrow[from=1-7, to=2-7]
	\arrow["{\Id_U}"', from=2-2, to=2-3]
	\arrow[from=2-5, to=1-6]
	\arrow[dashed, from=2-5, to=2-6]
	\arrow[from=2-5, to=3-5]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-5, to=3-6]
	\arrow["{q_U}"{description}, bend right = 40, from=2-5, to=5-5]
	\arrow[from=2-6, to=1-7]
	\arrow[from=2-6, to=3-6]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-6, to=3-7]
	\arrow[from=3-5, to=3-6]
	\arrow[from=3-5, to=4-5]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=3-5, to=4-6]
	\arrow[from=3-6, to=2-7]
	\arrow[from=3-6, to=4-6]
	\arrow["{\ep_U}"{description}, dashed, from=4-1, to=4-2]
	\arrow["{(\Star{\rho_U})_\E}", bend left, from=4-1, to=4-3]
	\arrow["{\Poly{q_U}{\tp}}"', from=4-1, to=5-2]
	\arrow[from=4-2, to=4-3]
	\arrow[from=4-2, to=5-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=4-2, to=5-3]
	\arrow["{\Poly{\pi}{\pi}}", from=4-3, to=5-3]
	\arrow[from=4-5, to=4-6]
	\arrow[from=4-5, to=5-5]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=4-5, to=5-6]
	\arrow[from=4-6, to=5-6]
	\arrow["{(\Star{\rho_U})_\U}"', from=5-2, to=5-3]
	\arrow[from=5-5, to=5-6]
\end{tikzcd}
\end{equation}

Now the above give us the following pullback
factorization of \cref{diag:universe-pullback}
% https://q.uiver.app/#q=WzAsOCxbMCwyLCJJX1UiXSxbMCwzLCJcXFUiXSxbMSwyLCJJIl0sWzEsMywiXFxUeXBlIl0sWzAsMSwiXFxFIl0sWzEsMSwiXFxUZXJtIl0sWzAsMCwiXFxwaSJdLFsxLDAsIlxcdHAiXSxbMCwyLCIgIiwyXSxbMiwzLCJxIiwxXSxbMSwzLCJcXEVsIiwyXSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNCwwLCJcXHJob19VIl0sWzUsMiwiXFxyaG8iLDJdLFs0LDUsIiAiLDFdLFs0LDEsIlxccGkiLDIseyJjdXJ2ZSI6M31dLFs1LDMsIlxcdHAiLDAseyJjdXJ2ZSI6LTN9XSxbNCwyLCIiLDIseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNiw3LCJcXGthcHBhIiwyLHsibGV2ZWwiOjJ9XSxbMCwxLCJxX1UiLDFdLFsxOSw5LCJcXGthcHBhX3EiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d
\[\begin{tikzcd}
	\pi & \tp \\
	\E & \Term \\
	{I_U} & I \\
	\U & \Type
	\arrow["\kappa"', Rightarrow, from=1-1, to=1-2]
	\arrow["{ }"{description}, from=2-1, to=2-2]
	\arrow["{\rho_U}", from=2-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-1, to=3-2]
	\arrow["\pi"', bend right, from=2-1, to=4-1]
	\arrow["\rho"', from=2-2, to=3-2]
	\arrow["\tp", bend left, from=2-2, to=4-2]
	\arrow["{ }"', from=3-1, to=3-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{q_U}"{description}, from=3-1, to=4-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=3-1, to=4-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "q"{description}, from=3-2, to=4-2]
	\arrow["\El"', from=4-1, to=4-2]
	\arrow["{\kappa_q}", shorten <=7pt, shorten >=7pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]

If we apply \cref{polynomial_on_cartesian_square} to
the lower pullback square, i.e. $\ka_{q}$ then we will get
a cartesian natural tranformation
$\Poly{\ka_{U}} : \Poly{q_{U}} \to \Poly{q}$.
Like in \cref{diag:universe-dependent-type-classifier-pullback-cube},
evaluating this at the pullback square \cref{diag:universe-pullback}
induces the cube below with pullbacks on every face.
% https://q.uiver.app/#q=WzAsOCxbMSwwLCJcXFBvbHl7cV9VfSBcXEUiXSxbMywwLCJcXFBvbHl7cX0gXFxFIl0sWzAsMSwiXFxQb2x5e3FfVX0gXFxUZXJtIl0sWzIsMSwiXFxQb2x5e3F9IFxcVGVybSJdLFsxLDIsIlxcUG9seXtxX1V9IFxcVSJdLFszLDIsIlxcUG9seXtxfSBcXFUiXSxbMCwzLCJcXFBvbHl7cV9VfSBcXFR5cGUiXSxbMiwzLCJcXFBvbHl7cX0gXFxUeXBlIl0sWzAsNF0sWzAsMV0sWzAsMl0sWzEsM10sWzEsNV0sWzIsM10sWzIsNl0sWzMsN10sWzQsNV0sWzQsNl0sWzUsN10sWzYsN11d
\begin{equation}
	\label{diag:universe-identity-type-classifier-pullback-cube}
\begin{tikzcd}
	& {\Poly{q_U} \E} && {\Poly{q} \E} \\
	{\Poly{q_U} \Term} && {\Poly{q} \Term} \\
	& {\Poly{q_U} \U} && {\Poly{q} \U} \\
	{\Poly{q_U} \Type} && {\Poly{q} \Type}
	\arrow[from=1-2, to=1-4]
	\arrow[from=1-2, to=2-1]
	\arrow[from=1-2, to=3-2]
	\arrow[from=1-4, to=2-3]
	\arrow[from=1-4, to=3-4]
	\arrow[from=2-1, to=2-3]
	\arrow[from=2-1, to=4-1]
	\arrow[from=2-3, to=4-3]
	\arrow[from=3-2, to=3-4]
	\arrow[from=3-2, to=4-1]
	\arrow[from=3-4, to=4-3]
	\arrow[from=4-1, to=4-3]
\end{tikzcd}
\end{equation}

Now we consider the diagrams for both $\ep$ and $\ep_{U}$
% https://q.uiver.app/#q=WzAsMTAsWzAsMiwiXFxQb2x5e3F9IHtcXFRlcm19Il0sWzAsMywiXFxQb2x5e3F9IHtcXFR5cGV9Il0sWzIsMywiXFxQb2x5e1xcdHB9IHtcXFR5cGV9Il0sWzIsMiwiXFxQb2x5e1xcdHB9IHtcXFRlcm19Il0sWzEsMiwiVCJdLFszLDAsIlxcUG9seXtcXHBpfXtcXEV9Il0sWzMsMSwiXFxQb2x5e1xccGl9IHtcXFV9Il0sWzEsMSwiXFxQb2x5e3FfVX0ge1xcVX0iXSxbMiwwLCJUX1UiXSxbMSwwLCJcXFBvbHl7cV9VfSB7XFxFfSJdLFswLDFdLFsxLDJdLFszLDJdLFs0LDFdLFs0LDNdLFs0LDIsIiIsMix7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFswLDQsIlxcZXAiLDFdLFs4LDQsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs3LDFdLFs2LDJdLFs1LDNdLFs3LDZdLFs4LDVdLFs4LDddLFs5LDBdLFs5LDddLFs4LDYsIiIsMCx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs1LDZdLFs5LDgsIlxcZXBfVSIsMV1d
\[\begin{tikzcd}
	& {\Poly{q_U} {\E}} & {T_U} & {\Poly{\pi}{\E}} \\
	& {\Poly{q_U} {\U}} && {\Poly{\pi} {\U}} \\
	{\Poly{q} {\Term}} & T & {\Poly{\tp} {\Term}} \\
	{\Poly{q} {\Type}} && {\Poly{\tp} {\Type}}
	\arrow["{\ep_U}"{description}, from=1-2, to=1-3]
	\arrow[from=1-2, to=2-2]
	\arrow[from=1-2, to=3-1]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-3, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-3, to=2-4]
	\arrow[from=1-4, to=2-4]
	\arrow[from=2-2, to=2-4]
	\arrow[from=2-2, to=4-1]
	\arrow[from=2-4, to=4-3]
	\arrow[from=3-1, to=4-1]
	\arrow[from=3-2, to=3-3]
	\arrow[from=3-2, to=4-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=3-2, to=4-3]
	\arrow[from=3-3, to=4-3]
	\arrow[from=4-1, to=4-3]
	\arrow[dashed, from=1-3, to=3-2, crossing over]
	\arrow[from=1-4, to=3-3, crossing over]
	\arrow["\ep"{description}, from=3-1, to=3-2, crossing over]
\end{tikzcd}\]
The right face is the composed diagonal pullback square from
\cref{diag:universe-dependent-type-classifier-pullback-cube}.
The left face of the outer cube is the composed diagonal pullback square from
\cref{diag:universe-identity-type-classifier-pullback-cube}.
The front face of the outer cube is the naturality square for $\Star{\rho}$ from
\cref{diag:J_definition}
and similarly the back face is the naturality square for $\Star{\rho_{U}}$ from
\cref{diag:J_U_definition}.

Since the left face is a pullback square,
to make $J_{U} : T_{U} \to \Poly{q_{U}}{\E}$ it suffices to consider
% https://q.uiver.app/#q=WzAsNixbMiwxLCJcXFBvbHl7cX0ge1xcVGVybX0iXSxbMiwyLCJcXFBvbHl7cX0ge1xcVHlwZX0iXSxbMiwwLCJUIl0sWzEsMiwiXFxQb2x5e3FfVX0ge1xcVX0iXSxbMCwwLCJUX1UiXSxbMSwxLCJcXFBvbHl7cV9VfSB7XFxFfSJdLFswLDFdLFsyLDAsIkoiLDFdLFs0LDIsImQiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywxXSxbNSwwXSxbNSwzXSxbNCwzXSxbNCw1LCJKX1UiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNSwxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{T_U} && T \\
	& {\Poly{q_U} {\E}} & {\Poly{q} {\Term}} \\
	& {\Poly{q_U} {\U}} & {\Poly{q} {\Type}}
	\arrow["d", dashed, from=1-1, to=1-3]
	\arrow["{J_U}"{description}, dashed, from=1-1, to=2-2]
	\arrow[from=1-1, to=3-2]
	\arrow["J"{description}, from=1-3, to=2-3]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow[from=2-3, to=3-3]
	\arrow[from=3-2, to=3-3]
\end{tikzcd}\]
It follows from uniqueness of maps into pullbakcs
that $J_{U}$ so defined is a section of $\ep_{U}$.
This concludes the construction of the $\Id$ type former for the universe $\U$.
Again, the only data we needed to supply was the lift $\Id_U$ of $\Id$ to the universe $\U$.

% \subsection{The Universe in Embedded Type Theory (HoTT0) and the relationship to the Natural Model}

\subsection{Binary products and Exponentials}

It is convenient to specialize $\Si$ and $\Pi$ types to their non-dependent
counterparts.
In the natural model we can construct these by considering first the map

\[ (\fst, \snd) : \Type \times \Type \to \Poly{\tp}{\Type}\]

which we can visualize in

% https://q.uiver.app/#q=WzAsNSxbMiwwLCJcXFRlcm0iXSxbMiwxLCJcXFR5cGUiXSxbMSwxLCJcXFR5cGUgXFx0aW1lcyBcXFR5cGUiXSxbMSwwLCJcXFRlcm0gXFx0aW1lcyBcXFR5cGUiXSxbMCwwLCJcXFR5cGUiXSxbMCwxLCJcXHRwIl0sWzIsMSwiXFxmc3QiLDJdLFszLDIsIlxcZnN0XiogXFx0cCIsMl0sWzMsMF0sWzMsMSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzMsNCwiXFxzbmQiLDFdXQ==
\[\begin{tikzcd}
	\Type & {\Term \times \Type} & \Term \\
	& {\Type \times \Type} & \Type
	\arrow["\snd"{description}, from=1-2, to=1-1]
	\arrow[from=1-2, to=1-3]
	\arrow["{\fst^* \tp}"', from=1-2, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-2, to=2-3]
	\arrow["\tp", from=1-3, to=2-3]
	\arrow["\fst"', from=2-2, to=2-3]
\end{tikzcd}\]

Then, respectively, the pullback of the diagrams \cref{fig:pi_intp_pullback}
and \cref{fig:si_intp_pullback} for interpreting $\Pi$ and $\Si$
rules along this map give us pullback diagrams for interpreting
function types and product types.
% https://q.uiver.app/#q=WzAsNixbMSwwLCJcXFBvbHl7XFx0cH17XFxUZXJtfSJdLFsxLDEsIlxcUG9seXtcXHRwfXtcXFR5cGV9Il0sWzIsMCwiXFxUZXJtIl0sWzIsMSwiXFxUeXBlIl0sWzAsMSwiXFxUeXBlIFxcdGltZXMgXFxUeXBlIl0sWzAsMCwiRiJdLFswLDEsIlxcUG9seXtcXHRwfXtcXHRwfSIsMl0sWzAsMiwiXFxsYSJdLFsyLDMsIlxcdHAiXSxbMSwzLCJcXFBpIiwyXSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNCwxLCIoXFxmc3QsXFxzbmQpIiwyXSxbNSw0LCIoXFxkb20sXFxjb2QpIiwyXSxbNSwwLCIoXFxkb20sXFxmdW4pIiwyXSxbNCwzLCJcXEV4cCIsMix7ImN1cnZlIjo1fV0sWzUsMiwiXFxsYSIsMCx7ImN1cnZlIjotNH1dLFs1LDEsIiIsMix7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
\[\begin{tikzcd}[column sep = large]
	F & {\Poly{\tp}{\Term}} & \Term \\
	{\Type \times \Type} & {\Poly{\tp}{\Type}} & \Type
	\arrow["{(\dom,\fun)}", from=1-1, to=1-2]
	\arrow["\la", bend left, from=1-1, to=1-3]
	\arrow["{(\dom,\cod)}"', from=1-1, to=2-1]
	\arrow["\la", from=1-2, to=1-3]
	\arrow["{\Poly{\tp}{\tp}}"', from=1-2, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-2, to=2-3]
	\arrow["\tp", from=1-3, to=2-3]
	\arrow["{(\fst,\snd)}"', from=2-1, to=2-2]
	\arrow["\Exp"', bend right, from=2-1, to=2-3]
	\arrow["\Pi"', from=2-2, to=2-3]
\end{tikzcd}\]

% https://q.uiver.app/#q=WzAsNixbMSwwLCJRIl0sWzEsMSwiXFxQb2x5e1xcdHB9e1xcVHlwZX0iXSxbMiwwLCJcXFRlcm0iXSxbMiwxLCJcXFR5cGUiXSxbMCwxLCJcXFR5cGUgXFx0aW1lcyBcXFR5cGUiXSxbMCwwLCJcXFRtIFxcdGltZXMgXFxUbSJdLFswLDEsIlxcdHAgXFx0cmlhbmdsZWxlZnQgXFx0cCIsMl0sWzAsMiwiXFxwYWlyIl0sWzIsMywiXFx0cCJdLFsxLDMsIlxcU2kiLDJdLFswLDMsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs0LDEsIihcXGZzdCxcXHNuZCkiLDJdLFs1LDQsIlxcdHAgXFx0aW1lcyBcXHRwIiwyXSxbNSwwLCIoXFxzbmQsIFxcZnN0LCBcXHRwIFxcY2lyYyBcXHNuZCkiXSxbNCwzLCJcXHRpbWVzIiwyLHsiY3VydmUiOjV9XSxbNSwyLCJcXHBhaXIiLDAseyJjdXJ2ZSI6LTR9XSxbNSwxLCIiLDAseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}[column sep = large]
	{\Term \times \Term} & Q & \Term \\
	{\Type \times \Type} & {\Poly{\tp}{\Type}} & \Type
	\arrow["{(\snd, \fst, \tp \circ \snd)}", from=1-1, to=1-2]
	\arrow["\pair", bend left, from=1-1, to=1-3]
	\arrow["{\tp \times \tp}"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["\pair", from=1-2, to=1-3]
	\arrow["{\tp \triangleleft \tp}"', from=1-2, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-2, to=2-3]
	\arrow["\tp", from=1-3, to=2-3]
	\arrow["{(\fst,\snd)}"', from=2-1, to=2-2]
	\arrow["\times"', bend right, from=2-1, to=2-3]
	\arrow["\Si"', from=2-2, to=2-3]
\end{tikzcd}\]

By the universal property of pullbacks and
\cref{polynomial_endofunctor_property}
We can write a map $\Ga \to F$ as a triple $(A,B,f)$
such that $A, B: \Ga \to \Type$ and
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEdhIFxcY2RvdCBBIl0sWzEsMCwiXFxUZXJtIl0sWzEsMSwiXFxUeXBlIl0sWzAsMSwiXFxHYSJdLFswLDEsImYiXSxbMSwyLCJcXHRwIl0sWzMsMiwiQiIsMl0sWzAsMywiXFxkaXNwe0F9IiwyXV0=
\[\begin{tikzcd}
	{\Ga \cdot A} & \Term \\
	\Ga & \Type
	\arrow["f", from=1-1, to=1-2]
	\arrow["{\disp{A}}"', from=1-1, to=2-1]
	\arrow["\tp", from=1-2, to=2-2]
	\arrow["B"', from=2-1, to=2-2]
\end{tikzcd}\]

This gives us four equivalent ways we can view a function.
Namely, as $f : \Ga \cdot A \to \Term$ in the above diagram,
$\la \circ f : \Ga \to \Term$,
as $(A,B,f) : \Ga \to F$, or as a map between the displays
$\disp{A} \to \disp{B}$

% https://q.uiver.app/#q=WzAsNSxbMSwyLCJcXEdhIl0sWzAsMCwiXFxHYSBcXGNkb3QgQSJdLFsxLDEsIlxcR2EgXFxjZG90IEIiXSxbMiwxLCJcXFRlcm0iXSxbMiwyLCJcXFR5cGUiXSxbMSwwLCJcXGRpc3B7QX0iLDJdLFsyLDAsIlxcZGlzcHtCfSIsMV0sWzEsMiwiKFxcZGlzcHtBfSxmKSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDNdLFszLDRdLFswLDQsIkIiLDJdLFsyLDQsIiIsMix7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFsxLDMsImYiXV0=
\[\begin{tikzcd}
	{\Ga \cdot A} \\
	& {\Ga \cdot B} & \Term \\
	& \Ga & \Type
	\arrow["{(\disp{A},f)}"{description}, dashed, from=1-1, to=2-2]
	\arrow["f", bend left, from=1-1, to=2-3]
	\arrow["{\disp{A}}"', bend right, from=1-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow["{\disp{B}}"{description}, from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow[from=2-3, to=3-3]
	\arrow["B"', from=3-2, to=3-3]
\end{tikzcd}\]

For the formalization, we need not prove that the pullback of
$\tp \triangleleft \tp$ is $\tp \times \tp$.
Rather, we can also use the universal property of pullbacks
and \cref{polynomial_endofunctor_property}
to classify a map into the pullback (whatever it may be) as a
pair $(\al, \be)$, where $\al, \be : \Ga \to \Term$.
This could then be adapted to a proof that the pullback is
what the diagram claims it to be.

Naturally, there are the same constructions bounded by the universe,
which will exist when $\Pi_{U}$ and $\Si_{U}$ exist.
% https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXFUgXFx0aW1lcyBcXFUiXSxbMCwxLCJcXFR5cGUgXFx0aW1lcyBcXFR5cGUiXSxbMSwxLCJcXFR5cGUiXSxbMSwwLCJcXFUiXSxbMywwLCJcXFUgXFx0aW1lcyBcXFUiXSxbMywxLCJcXFR5cGUgXFx0aW1lcyBcXFR5cGUiXSxbNCwwLCJcXFUiXSxbNCwxLCJcXFR5cGUiXSxbMCwxLCJcXEVsIFxcdGltZXMgXFxFbCIsMl0sWzEsMiwiXFxFeHAiLDJdLFswLDMsIlxcRXhwX1UiXSxbMywyLCJcXEVsIl0sWzQsNSwiXFxFbCBcXHRpbWVzIFxcRWwiLDJdLFs0LDYsIlxcdGltZXNfVSJdLFs1LDcsIlxcdGltZXMiLDJdLFs2LDcsIlxcRWwiXV0=
\[\begin{tikzcd}
	{\U \times \U} & \U && {\U \times \U} & \U \\
	{\Type \times \Type} & \Type && {\Type \times \Type} & \Type
	\arrow["{\Exp_U}", from=1-1, to=1-2]
	\arrow["{\El \times \El}"', from=1-1, to=2-1]
	\arrow["\El", from=1-2, to=2-2]
	\arrow["{\times_U}", from=1-4, to=1-5]
	\arrow["{\El \times \El}"', from=1-4, to=2-4]
	\arrow["\El", from=1-5, to=2-5]
	\arrow["\Exp"', from=2-1, to=2-2]
	\arrow["\times"', from=2-4, to=2-5]
\end{tikzcd}\]

The identity function $\id_{A} : \Ga \to \Term$ of type $\Exp \circ (A,A) : \Ga \to \Type$
can be defined by the following

% https://q.uiver.app/#q=WzAsOSxbMCwyLCJcXEdhIl0sWzAsMSwiXFxHYSBcXGNkb3QgQSJdLFsxLDEsIlxcVGVybSJdLFsxLDIsIlxcVHlwZSJdLFszLDAsIlxcR2EiXSxbNCwxLCJGIl0sWzUsMSwiXFxUZXJtIl0sWzUsMiwiXFxUeXBlIl0sWzQsMiwiXFxUeXBlIFxcdGltZXMgXFxUeXBlIl0sWzEsMCwiXFxkaXNwe0F9IiwxXSxbMSwyLCJcXHZhcl97QX0iLDJdLFsyLDMsIlxcdHAiXSxbMCwzLCJBIiwyXSxbMSwzLCIiLDIseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNCw1LCIoQSxBLFxcdmFyX3tBfSkiLDFdLFs1LDYsIlxcbGEiXSxbNiw3LCJcXHRwIl0sWzgsNywiXFxFeHAiLDJdLFs1LDgsIihcXGRvbSwgXFxjb2QpIiwxXSxbNCw4LCIoQSxBKSIsMl0sWzQsNiwiXFxpZF9BIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
\[\begin{tikzcd}
	&&& \Ga \\
	{\Ga \cdot A} & \Term &&& F & \Term \\
	\Ga & \Type &&& {\Type \times \Type} & \Type
	\arrow["{(A,A,\var_{A})}"{description}, from=1-4, to=2-5]
	\arrow["{\id_A}", bend left, dashed, from=1-4, to=2-6]
	\arrow["{(A,A)}"', bend right, from=1-4, to=3-5]
	\arrow["{\var_{A}}"', from=2-1, to=2-2]
	\arrow["{\disp{A}}"{description}, from=2-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-1, to=3-2]
	\arrow["\tp", from=2-2, to=3-2]
	\arrow["\la", from=2-5, to=2-6]
	\arrow["{(\dom, \cod)}"{description}, from=2-5, to=3-5]
	\arrow["\tp", from=2-6, to=3-6]
	\arrow["A"', from=3-1, to=3-2]
	\arrow["\Exp"', from=3-5, to=3-6]
\end{tikzcd}\]

Viewed as a map between the display maps, this is simply the identity
$\Ga \cdot A \to \Ga \cdot A$.
% https://q.uiver.app/#q=WzAsNSxbMSwyLCJcXEdhIl0sWzEsMSwiXFxHYSBcXGNkb3QgQSJdLFsyLDEsIlxcVGVybSJdLFsyLDIsIlxcVHlwZSJdLFswLDAsIlxcR2EgXFxjZG90IEEiXSxbMSwwLCJcXGRpc3B7QX0iLDFdLFsxLDIsIlxcdmFyX3tBfSIsMl0sWzIsMywiXFx0cCJdLFswLDMsIkEiLDJdLFsxLDMsIiIsMix7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs0LDAsIlxcZGlzcHtBfSIsMl0sWzQsMSwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzQsMiwiXFx2YXJfQSJdXQ==
\[\begin{tikzcd}
	{\Ga \cdot A} \\
	& {\Ga \cdot A} & \Term \\
	& \Ga & \Type
	\arrow[Rightarrow, dashed, no head, from=1-1, to=2-2]
	\arrow["{\var_A}", bend left, from=1-1, to=2-3]
	\arrow["{\disp{A}}"', bend right, from=1-1, to=3-2]
	\arrow["{\var_{A}}"', from=2-2, to=2-3]
	\arrow["{\disp{A}}"{description}, from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow["\tp", from=2-3, to=3-3]
	\arrow["A"', from=3-2, to=3-3]
\end{tikzcd}\]

Composition is also simplest when viewed as an operation on maps between fibers.
Given $f : \disp{A} \to \disp{B}$ and $g : \disp{B} \to \disp{C}$,
the composition is $g \circ f : \disp{A} \to \disp{C}$.

\subsection{Univalence}

For two types $A B : \Ga \to \Type$
and two functions $f, g : A \to B$ we can define internally
a \textit{homotopy} from $f$ to $g$ as
\[ f \sim g := \Pi_{a : A} \, \Id (f \, a, g \, a) \]
We define the types of left and right inverses of $f : A \to B$ as
\[ \mathsf{BigLinv} f := \Si_{g : B \to A} \, g \circ f \sim \id_{A} \]
\[ \mathsf{BigRinv} f := \Si_{g : B \to A} \, f \circ g \sim \id_{B} \]
and the property of being an equivalence
\[ \mathsf{IsBigEquiv} f := \mathsf{BigLinv} f \times \mathsf{BigRinv} f \]

We could do the same for two small types $A, B : \Ga \to \U$

\[ \mathsf{IsEquiv} f := \mathsf{Linv} f \times \mathsf{Rinv} f \]
\[ \mathsf{Equiv} A \, B := \Si_{f : A \to B} \mathsf{IsEquiv} f\]

Again, internally we can define a function
\[ \mathsf{IdToEquiv} A \, B : \Id (A, B) \to \mathsf{Equiv} A \, B \]
which uses $J$ to transport along the proof of equality to produce an equivalence.
Univalence for universe $\U$ states that this itself is an equivalence
\[ \mathsf{ua} : \mathsf{IsBigEquiv} (\mathsf{IdToEquiv} A \, B)\]
Note that this statement is large, i.e. not a type in the universe $\U$.
% https://q.uiver.app/#q=WzAsMyxbMSwxLCJcXFUgXFxjZG90IFxcVSJdLFswLDAsIlxcVSBcXGNkb3QgXFxVIFxcY2RvdCBcXElkIl0sWzIsMCwiXFxVIFxcY2RvdCBcXFUgXFxjZG90IFxcbWF0aHNme0VxdWl2fSJdLFsxLDBdLFsyLDBdLFsxLDIsIlxcbWF0aHNme0lkVG9FcXVpdn0iXV0=
\[\begin{tikzcd}
	{\U \cdot \U \cdot \Id} && {\U \cdot \U \cdot \mathsf{Equiv}} \\
	& {\U \cdot \U}
	\arrow["{\mathsf{IdToEquiv}}", from=1-1, to=1-3]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-3, to=2-2]
\end{tikzcd}\]

\subsection{Extensional identity types and UIP}

In this section we outline variations on the identity type in the
natural model.
We will describe these as additional structure on $\Id$,
as opposed to introducing different identity types.
The first option is fully extensional identity types,
i.e. those satisfying equality reflection and uniqueness of identity proofs (UIP).
Equality reflection says that if one can construct a term satisfying $\Id(a,b)$
then we have that definitionally $a \equiv b$,
i.e. they are equal morphisms in the natural model.
This amounts to requiring that \cref{figure:id_pullback_def} is a pullback,
i.e. $\rho$ is an isomorphism
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXFRlcm0iXSxbMCwxLCJcXHRwIFxcdGltZXNfXFxUeXBlIFxcdHAiXSxbMSwxLCJcXFR5cGUiXSxbMSwwLCJcXFRlcm0iXSxbMCwxLCJcXGRlIiwyXSxbMSwyLCJcXElkIiwyXSxbMywyLCJcXHRwIl0sWzAsMywiXFxyZWZsIl0sWzAsMiwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	\Term & \Term \\
	{\tp \times_\Type \tp} & \Type
	\arrow["\refl", from=1-1, to=1-2]
	\arrow["\de"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["\tp", from=1-2, to=2-2]
	\arrow["\Id"', from=2-1, to=2-2]
\end{tikzcd}\]
Note that this means $\Star{\rho}$ is an isomorphism,
from which it follows that \cref{J_definition_diagram} is also a pullback,
i.e. $\ep$ is an isomorphism.
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXFBvbHl7cX0ge1xcVGVybX0iXSxbMCwxLCJcXFBvbHl7cX0ge1xcVHlwZX0iXSxbMSwxLCJcXFBvbHl7XFx0cH0ge1xcVGVybX0iXSxbMSwwLCJcXFBvbHl7XFx0cH0ge1xcVGVybX0iXSxbMCwxLCJcXFBvbHl7cX0ge1xcdHB9IiwyXSxbMSwyLCJcXFN0YXJ7XFxyaG99X3tcXFR5cGV9IiwyXSxbMywyLCJcXFBvbHl7XFx0cH0ge1xcdHB9Il0sWzAsMywiXFxTdGFye1xccmhvfV97XFxUZXJtfSJdLFswLDIsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
\[\begin{tikzcd}
	{\Poly{q} {\Term}} & {\Poly{\tp} {\Term}} \\
	{\Poly{q} {\Type}} & {\Poly{\tp} {\Term}}
	\arrow["{\Star{\rho}_{\Term}}", from=1-1, to=1-2]
	\arrow["{\Poly{q} {\tp}}"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["{\Poly{\tp} {\tp}}", from=1-2, to=2-2]
	\arrow["{\Star{\rho}_{\Type}}"', from=2-1, to=2-2]
\end{tikzcd}\]

If we were to only require UIP then this is asking that
$I \to \tp \times_{\Type} \tp$ is a strict proposition,
meaning for any $(a,b) : \Ga \to \tp \times_{\Type} \tp$
there it at most one lift
% https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXEdhIl0sWzEsMSwiXFx0cCBcXHRpbWVzX1xcVHlwZSBcXHRwIl0sWzEsMCwiSSJdLFswLDEsIihhLGIpIiwyXSxbMiwxXSxbMCwyLCIhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
\[\begin{tikzcd}
	& I \\
	\Ga & {\tp \times_\Type \tp}
	\arrow[from=1-2, to=2-2]
	\arrow["{!}", dashed, from=2-1, to=1-2]
	\arrow["{(a,b)}"', from=2-1, to=2-2]
\end{tikzcd}\]

One might wonder what other variations we could
come up with by tweaking the pullback conditions.
In fact, only requiring that $\rho$ has a section
is equivalent to requiring that $\rho$ is an isomorphism.
So this just the extensional case again.

If we require instead that $\ep$ is an isomorphism
then this is giving an $\eta$-rule for $J$,
from which we can prove equality reflection and UIP
\cite{streicher1995ExtensionalConceptsInIntensionalTypeTheory}.
So this just the extensional case again.
